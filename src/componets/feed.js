import { navigateTo } from '../router';
import {createpost} from '../lib/firebase.js';

export const feed = () => {
  const squareF = document.createElement('div');
  squareF.setAttribute('class', 'squareF');
  const squareHeaderF = document.createElement('header');
  squareHeaderF.setAttribute('class', 'squareHeaderF');
  const logoF = document.createElement('img');
  logoF.setAttribute('src', 'https://i.ibb.co/bWGQN64/REDA-1.png');
  logoF.setAttribute('class', 'logoF');
  const userInfoF = document.createElement('div');
  userInfoF.setAttribute('class', 'userInfoF');
  const postContainer = document.createElement('form');
  postContainer.setAttribute('class', 'postContainer');
  const postTitle = document.createElement('textarea');
  postTitle.setAttribute('id', 'postTitle');
  const post = document.createElement('textarea');
  post.setAttribute('id', 'post');
  const subsquareF = document.createElement('div');
  subsquareF.setAttribute('class', 'subsquareF');
  const btnHomeF = document.createElement('button');
  btnHomeF.setAttribute('class', 'btnHomeF');
  const btnPubF = document.createElement('button');
  btnPubF.setAttribute('class', 'btnPubF');
  btnPubF.textContent = 'publicar';
  btnHomeF.textContent = 'inicio';
  const squareFooterF = document.createElement('div');
  squareF.appendChild(squareHeaderF);
  squareHeaderF.appendChild(logoF);
  squareF.appendChild(postContainer);
  squareF.appendChild(userInfoF);
  postContainer.appendChild(postTitle);
  postContainer.appendChild(post);
  squareF.appendChild(subsquareF);
  postContainer.appendChild(btnPubF);
  subsquareF.appendChild(btnHomeF);
  squareF.appendChild(squareFooterF);
  btnHomeF.addEventListener('click', () => {
    navigateTo('/home');
  });
  postContainer.addEventListener('submit', (e) => {
    e.preventDefault();
    const feedTitle = e.target.elements.postTitle.value;
    const feedPost = e.target.elements.post.value;
    console.log(feedTitle);
    console.log(feedPost);
    createpost(feedTitle, feedPost);
  });
  return squareF;
};
